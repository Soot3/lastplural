vmagent:
  enabled: true

  spec:
    datasource:
      url: "http://vmsingle.monitoring.svc.cluster.local:8428"
    remoteWrite:
      url: "http://vmsingle.monitoring.svc.cluster.local:8429"
    remoteRead:
      url: "http://vmsingle.monitoring.svc.cluster.local:8429"
    externalLabels:
      cluster: {{ cluster.handle }}

  additionalRemoteWrites:
  - url: '{{ contexts["plrl/cloud/observability"].vmetrics.url }}'
    basicAuth:
      username: 
        name: vm-auth
        key: user
      password:
        name: vm-auth
        key: password

prometheus-operator-crds:
  enabled: true

vmalert:
  enabled: true

alertmanager:
  enabled: true

vmsingle:
  enabled: false

grafana:
  enabled: true

vmcluster:
  enabled: false

kubeApiServer:
  enabled: false

victoria-metrics-operator:
  operator:
    enable_converter_ownership: true

extraObjects:
- apiVersion: v1
  kind: Secret
  metadata:
    name: vm-auth
  stringData:
    password: {{ contexts["plrl/cloud/observability"].vmetrics.password }}
    user: {{ contexts["plrl/cloud/observability"].vmetrics.user }}
